<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Admin - Quáº£n lÃ½ TÃ i Khoáº£n</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      padding: 30px;
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
    }
    h2 {
      color: #555;
      margin: 30px 0 15px 0;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }
    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      margin: 10px 5px 10px 0;
      transition: background 0.3s;
    }
    button:hover {
      background: #5568d3;
    }
    button.success {
      background: #28a745;
    }
    button.success:hover {
      background: #218838;
    }
    button.danger {
      background: #dc3545;
    }
    button.danger:hover {
      background: #c82333;
    }
    input, textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
      margin: 10px 0;
      font-family: inherit;
    }
    .form-group {
      margin-bottom: 20px;
    }
    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 5px;
      color: #333;
    }
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196F3;
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
      font-size: 14px;
    }
    .success-box {
      background: #d4edda;
      border-left: 4px solid #28a745;
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
      font-size: 14px;
    }
    .error-box {
      background: #f8d7da;
      border-left: 4px solid #dc3545;
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
      font-size: 14px;
    }
    .warning-box {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
      font-size: 14px;
    }
    code {
      background: #f0f0f0;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: monospace;
    }
    .tab-container {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #ddd;
    }
    .tab {
      padding: 12px 24px;
      cursor: pointer;
      background: #f0f0f0;
      border: none;
      border-radius: 5px 5px 0 0;
      font-weight: 600;
      color: #666;
    }
    .tab.active {
      background: #667eea;
      color: white;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .student-list {
      margin-top: 20px;
    }
    .student-item {
      background: #f8f9fa;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      border-left: 4px solid #667eea;
    }
    .student-item strong {
      color: #333;
    }
    .file-input-wrapper {
      position: relative;
      display: inline-block;
    }
    .file-input-wrapper input[type=file] {
      position: absolute;
      left: -9999px;
    }
    .file-input-label {
      display: inline-block;
      padding: 12px 24px;
      background: #667eea;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
    }
    .file-input-label:hover {
      background: #5568d3;
    }
    .file-name {
      display: inline-block;
      margin-left: 10px;
      color: #666;
      font-size: 14px;
    }
    textarea {
      min-height: 200px;
      font-family: monospace;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ‘¥ Admin Dashboard</h1>
    <p class="subtitle">ÄÄƒng kÃ½ sinh viÃªn vÃ o há»‡ thá»‘ng blockchain</p>

    <button id="btnConnect">ğŸ”— Káº¿t ná»‘i MetaMask (Admin)</button>
    <div id="accountInfo" style="margin: 15px 0; font-size: 14px;">
      <strong>ChÆ°a káº¿t ná»‘i</strong>
    </div>

    <hr style="margin: 20px 0; border: none; border-top: 1px solid #ddd;">

    <div class="tab-container">
      <button class="tab active" onclick="switchTab('single')">ğŸ“ ÄÄƒng kÃ½ sinh viÃªn má»›i</button>
      <button class="tab" onclick="switchTab('update')">âœï¸ Cáº­p nháº­t thÃ´ng tin sinh viÃªn</button>
      <button class="tab" onclick="switchTab('excel')">ğŸ“Š Upload file Excel</button>
      <button class="tab" onclick="switchTab('dean')">ğŸ‘¨â€ğŸ« Quáº£n lÃ½ CÃ¡n bá»™ quáº£n lÃ½ Ä‘iá»ƒm</button>
      <button class="tab" onclick="switchTab('list')">ğŸ“‹ Danh sÃ¡ch sinh viÃªn</button>
    </div>

    <!-- TAB 1: ÄÄƒng kÃ½ tá»«ng sinh viÃªn -->
    <div id="tab-single" class="tab-content active">
      <h2>ÄÄƒng kÃ½ sinh viÃªn má»›i</h2>
      
      <div class="warning-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 15px; border-radius: 5px;">
        <strong>âš ï¸ YÃŠU Cáº¦U QUAN TRá»ŒNG:</strong><br>
        <strong style="color: #d63031;">TrÆ°á»›c khi Ä‘Äƒng kÃ½ sinh viÃªn, PHáº¢I gÃ¡n Class vÃ o ChÆ°Æ¡ng trÃ¬nh Ä‘Ã o táº¡o!</strong><br>
        <ol style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
          <li>VÃ o trang <strong>admin_programs.html</strong></li>
          <li>Upload chÆ°Æ¡ng trÃ¬nh Ä‘Ã o táº¡o (JSON)</li>
          <li>GÃ¡n Class vÃ o chÆ°Æ¡ng trÃ¬nh (vÃ­ dá»¥: DI20T9A1 â†’ TT&MMT2020)</li>
          <li>Quay láº¡i Ä‘Ã¢y Ä‘Äƒng kÃ½ sinh viÃªn vá»›i Class Ä‘Ã£ Ä‘Æ°á»£c gÃ¡n</li>
        </ol>
        <div style="margin-top: 10px; padding: 10px; background: white; border-radius: 5px;">
          <strong>ğŸ’¡ CÃ¡ch hoáº¡t Ä‘á»™ng:</strong> Sinh viÃªn tá»± Ä‘á»™ng Ä‘Æ°á»£c gÃ¡n vÃ o chÆ°Æ¡ng trÃ¬nh dá»±a trÃªn Class. 
          KhÃ´ng cáº§n nháº­p Program ID thá»§ cÃ´ng!
        </div>
      </div>
      
      <div class="info-box" style="font-size: 13px;">
        <strong>ğŸ“Œ LÆ°u Ã½:</strong><br>
        â€¢ MSSV lÃ  báº¯t buá»™c (lÃ m key Ä‘á»ƒ ná»‘i cÃ¡c block)<br>
        â€¢ <strong>Class lÃ  Báº®T BUá»˜C</strong> (Ä‘á»ƒ tá»± Ä‘á»™ng map sang Program)<br>
        â€¢ Dá»¯ liá»‡u lÆ°u trá»±c tiáº¿p trÃªn blockchain
      </div>

      <h3 style="color: #667eea; margin-top: 20px;">ThÃ´ng tin CÃ¡ nhÃ¢n</h3>
      <div class="form-row">
        <div class="form-group">
          <label>MÃ£ sá»‘ sinh viÃªn (MSSV) *</label>
          <input type="text" id="singleStudentId" placeholder="B2203716" value="B2203716" />
        </div>
        <div class="form-group">
          <label>Há» vÃ  tÃªn *</label>
          <input type="text" id="singleName" placeholder="LÃª Háº£i ÄÄƒng" value="LÃª Háº£i ÄÄƒng" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>NgÃ y sinh</label>
          <input type="text" id="singleDob" placeholder="21/08/2004" value="21/08/2004" />
        </div>
        <div class="form-group">
          <label>CCCD/CMND</label>
          <input type="text" id="singleCccd" placeholder="093103002165" value="093103002165" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Sá»‘ Ä‘iá»‡n thoáº¡i</label>
          <input type="tel" id="singlePhone" placeholder="0374396243" value="0374396243" />
        </div>
        <div class="form-group">
          <label>Email *</label>
          <input type="email" id="singleEmail" placeholder="dangb2203716@student.ctu.edu.vn" value="dangb2203716@student.ctu.edu.vn" />
        </div>
      </div>

      <div class="form-group">
        <label>QuÃª quÃ¡n</label>
        <input type="text" id="singleHometown" placeholder="ChÃ¢u ThÃ nh, KiÃªn Giang" value="ChÃ¢u ThÃ nh, KiÃªn Giang" />
      </div>

      <h3 style="color: #667eea; margin-top: 30px;">ThÃ´ng tin ÄÃ o táº¡o</h3>
      <div class="form-group">
        <label>Lá»›p há»c * <span style="color: #d63031; font-size: 12px;">(Báº¯t buá»™c - DÃ¹ng Ä‘á»ƒ map sang Program)</span></label>
        <input type="text" id="singleClass" placeholder="DI20T9A1" value="DI20T9A1" required />
        <small style="color: #666; font-size: 12px;">VÃ­ dá»¥: DI20T9A1, FL20V1F1. Pháº£i Ä‘Ã£ gÃ¡n vÃ o Program trÆ°á»›c!</small>
      </div>

      <div class="form-group">
        <label>TÃªn ngÃ nh há»c</label>
        <input type="text" id="singleMajor" placeholder="An toÃ n thÃ´ng tin" value="An toÃ n thÃ´ng tin" />
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Khoa</label>
          <input type="text" id="singleDepartment" placeholder="Khoa CÃ´ng nghá»‡ ThÃ´ng tin vÃ  Truyá»n thÃ´ng" value="Khoa CÃ´ng nghá»‡ ThÃ´ng tin vÃ  Truyá»n thÃ´ng" />
        </div>
        <div class="form-group">
          <label>TrÆ°á»ng</label>
          <input type="text" id="singleSchool" placeholder="TrÆ°á»ng Äáº¡i há»c Cáº§n ThÆ¡" value="TrÆ°á»ng Äáº¡i há»c Cáº§n ThÆ¡" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Há»‡ Ä‘Ã o táº¡o</label>
          <input type="text" id="singleProgram" placeholder="ChÃ­nh quy" value="ChÃ­nh quy" />
        </div>
        <div class="form-group">
          <label>KhÃ³a há»c</label>
          <input type="text" id="singleKhoaHoc" placeholder="2020" value="" />
          <small style="color: #666; font-size: 12px;">VÃ­ dá»¥: 2020, 2021, 2022...</small>
        </div>
      </div>

      <h3 style="color: #d63031; margin-top: 30px;">ğŸ” Báº£o máº­t - Äá»‹a chá»‰ VÃ­</h3>
      <div class="warning-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 15px;">
        <strong>âš ï¸ QUAN TRá»ŒNG:</strong> Äá»‹a chá»‰ vÃ­ Ethereum cá»§a sinh viÃªn (Báº®T BUá»˜C).<br>
        <strong>LÃ½ do:</strong> Chá»‰ ngÆ°á»i cÃ³ private key cá»§a vÃ­ nÃ y má»›i cÃ³ thá»ƒ:<br>
        â€¢ ÄÄƒng nháº­p xem Ä‘iá»ƒm<br>
        â€¢ Mint báº±ng tá»‘t nghiá»‡p<br>
        â€¢ XÃ¡c thá»±c danh tÃ­nh<br><br>
        <strong>ğŸ’¡ CÃ¡ch táº¡o:</strong> Sá»­ dá»¥ng script <code>generate_wallets.js</code> hoáº·c MetaMask
      </div>
      
      <div class="form-group">
        <label>Äá»‹a chá»‰ VÃ­ Ethereum * <span style="color: #d63031;">(Báº®T BUá»˜C - Äá»ƒ xÃ¡c thá»±c)</span></label>
        <input type="text" id="singleWalletAddress" placeholder="0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb1" value="" required 
               pattern="^0x[a-fA-F0-9]{40}$" 
               title="Äá»‹a chá»‰ Ethereum há»£p lá»‡ (0x + 40 kÃ½ tá»± hex)" />
        <small style="color: #666; font-size: 12px;">VÃ­ dá»¥: 0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb1</small>
      </div>

      <div class="form-group">
        <label>Ghi chÃº</label>
        <textarea id="singleNotes" rows="3" placeholder="ThÃ´ng tin bá»• sung..."></textarea>
      </div>

      <button class="success" onclick="registerSingleStudent()">âœ… ÄÄƒng kÃ½ sinh viÃªn</button>
      <button onclick="clearSingleForm()">ğŸ”„ XÃ³a form</button>

      <div id="singleStatus"></div>
    </div>

    <!-- TAB 2: Cáº­p nháº­t thÃ´ng tin sinh viÃªn -->
    <div id="tab-update" class="tab-content">
      <h2>Cáº­p nháº­t thÃ´ng tin sinh viÃªn</h2>
      
      <div class="warning-box" style="font-size: 13px;">
        <strong>âš ï¸ LÆ°u Ã½:</strong><br>
        â€¢ Chá»©c nÄƒng nÃ y chá»‰ cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n/Ä‘Ã o táº¡o cá»§a sinh viÃªn<br>
        â€¢ KHÃ”NG áº£nh hÆ°á»Ÿng Ä‘áº¿n Ä‘iá»ƒm sá»‘ Ä‘Ã£ submit<br>
        â€¢ Sinh viÃªn pháº£i Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½ trÆ°á»›c Ä‘Ã³
      </div>

      <div class="form-group">
        <label>MÃ£ sá»‘ sinh viÃªn (MSSV) Ä‘á»ƒ tÃ¬m kiáº¿m *</label>
        <div style="display: flex; gap: 10px;">
          <input type="text" id="updateSearchMSSV" placeholder="Nháº­p MSSV cáº§n cáº­p nháº­t" />
          <button onclick="searchStudentForUpdate()" style="white-space: nowrap;">ğŸ” TÃ¬m kiáº¿m</button>
        </div>
      </div>

      <div id="updateSearchResult"></div>

      <div id="updateFormSection" style="display: none;">
        <h3 style="color: #667eea; margin-top: 20px;">ThÃ´ng tin CÃ¡ nhÃ¢n</h3>
        <div class="form-row">
          <div class="form-group">
            <label>MÃ£ sá»‘ sinh viÃªn (MSSV) *</label>
            <input type="text" id="updateStudentId" readonly style="background: #f0f0f0;" />
          </div>
          <div class="form-group">
            <label>Há» vÃ  tÃªn *</label>
            <input type="text" id="updateName" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>NgÃ y sinh</label>
            <input type="text" id="updateDob" placeholder="21/08/2004" />
          </div>
          <div class="form-group">
            <label>CCCD/CMND</label>
            <input type="text" id="updateCCCD" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Sá»‘ Ä‘iá»‡n thoáº¡i</label>
            <input type="text" id="updatePhone" />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="updateEmail" />
          </div>
        </div>

        <div class="form-group">
          <label>QuÃª quÃ¡n</label>
          <input type="text" id="updateHometown" />
        </div>

        <h3 style="color: #667eea; margin-top: 30px;">ThÃ´ng tin ÄÃ o táº¡o</h3>
        <div class="form-group">
          <label>Lá»›p</label>
          <input type="text" id="updateClass" />
        </div>

        <div class="form-group">
          <label>TÃªn ngÃ nh há»c</label>
          <input type="text" id="updateMajor" />
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Khoa</label>
            <input type="text" id="updateDepartment" />
          </div>
          <div class="form-group">
            <label>TrÆ°á»ng</label>
            <input type="text" id="updateSchool" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Há»‡ Ä‘Ã o táº¡o</label>
            <input type="text" id="updateProgram" />
          </div>
          <div class="form-group">
            <label>KhÃ³a há»c</label>
            <input type="text" id="updateKhoaHoc" placeholder="2020" />
          </div>
        </div>

        <h3 style="color: #d63031; margin-top: 30px;">ğŸ” Báº£o máº­t - Äá»‹a chá»‰ VÃ­</h3>
        <div class="warning-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 15px;">
          <strong>âš ï¸ QUAN TRá»ŒNG:</strong> Thay Ä‘á»•i Ä‘á»‹a chá»‰ vÃ­ sinh viÃªn.<br>
          <strong>LÆ°u Ã½:</strong><br>
          â€¢ Äá»ƒ trá»‘ng náº¿u khÃ´ng muá»‘n thay Ä‘á»•i Ä‘á»‹a chá»‰ vÃ­<br>
          â€¢ Äá»‹a chá»‰ vÃ­ má»›i pháº£i chÆ°a Ä‘Æ°á»£c liÃªn káº¿t vá»›i sinh viÃªn khÃ¡c<br>
          â€¢ Sinh viÃªn sáº½ cáº§n sá»­ dá»¥ng private key cá»§a vÃ­ má»›i Ä‘á»ƒ Ä‘Äƒng nháº­p
        </div>
        
        <div class="form-group">
          <label>Äá»‹a chá»‰ VÃ­ Ethereum <span style="color: #666; font-size: 12px;">(Äá»ƒ trá»‘ng náº¿u khÃ´ng Ä‘á»•i)</span></label>
          <input type="text" id="updateWalletAddress" placeholder="0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb1" 
                 pattern="^0x[a-fA-F0-9]{40}$" 
                 title="Äá»‹a chá»‰ Ethereum há»£p lá»‡ (0x + 40 kÃ½ tá»± hex)" />
          <small style="color: #666; font-size: 12px;">VÃ­ dá»¥: 0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb1</small>
        </div>

        <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 5px;">
          <strong>ğŸ“Œ XÃ¡c nháº­n:</strong> Báº¡n Ä‘ang cáº­p nháº­t thÃ´ng tin cho sinh viÃªn <strong id="updateConfirmName">-</strong> (MSSV: <strong id="updateConfirmId">-</strong>)
        </div>

        <button class="success" onclick="updateStudentInfo()">âœ… Cáº­p nháº­t thÃ´ng tin</button>
        <button onclick="clearUpdateForm()">ğŸ”„ XÃ³a form</button>

        <div id="updateStatus"></div>
      </div>
    </div>

    <!-- TAB 3: Upload Excel -->
    <div id="tab-excel" class="tab-content">
      <h2>Upload danh sÃ¡ch sinh viÃªn tá»« Excel/CSV</h2>

      <div class="success-box" style="background: #d4edda; border-left: 4px solid #28a745;">
        <strong>ğŸš€ TÃNH NÄ‚NG BATCH REGISTRATION:</strong><br>
        <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
          <li>âœ… <strong>Gá»™p táº¥t cáº£ sinh viÃªn vÃ o Má»˜T transaction duy nháº¥t</strong></li>
          <li>âœ… <strong>Chá»‰ cáº§n kÃ½ má»™t láº§n</strong> thay vÃ¬ kÃ½ nhiá»u láº§n</li>
          <li>âœ… <strong>Tiáº¿t kiá»‡m gas fee</strong> vÃ  thá»i gian Ä‘Äƒng kÃ½</li>
          <li>âœ… <strong>Táº¥t cáº£ sinh viÃªn vÃ o cÃ¹ng má»™t block</strong></li>
        </ul>
      </div>

      <div class="info-box" style="font-size: 12px;">
        <strong>ğŸ“‹ Cáº¥u trÃºc file máº«u (Excel/CSV):</strong>
        <table style="width: 100%; margin-top: 10px; font-size: 11px; border-collapse: collapse;">
          <tr style="background: #667eea; color: white;">
            <th style="padding: 8px; border: 1px solid #ddd;">MSSV</th>
            <th style="padding: 8px; border: 1px solid #ddd;">HoTen</th>
            <th style="padding: 8px; border: 1px solid #ddd;">NgaySinh</th>
            <th style="padding: 8px; border: 1px solid #ddd;">CCCD</th>
            <th style="padding: 8px; border: 1px solid #ddd;">SDT</th>
            <th style="padding: 8px; border: 1px solid #ddd;">Email</th>
            <th style="padding: 8px; border: 1px solid #ddd;">QueQuan</th>
            <th style="padding: 8px; border: 1px solid #ddd;">Lop</th>
            <th style="padding: 8px; border: 1px solid #ddd;">Nganh</th>
            <th style="padding: 8px; border: 1px solid #ddd;">Khoa</th>
            <th style="padding: 8px; border: 1px solid #ddd;">Truong</th>
            <th style="padding: 8px; border: 1px solid #ddd;">HeDaoTao</th>
            <th style="padding: 8px; border: 1px solid #ddd; background: #f6921e;">WalletAddress</th>
            <th style="padding: 8px; border: 1px solid #ddd; background: #28a745;">KhoaHoc</th>
          </tr>
          <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">B2203716</td>
            <td style="padding: 8px; border: 1px solid #ddd;">LÃª Háº£i ÄÄƒng</td>
            <td style="padding: 8px; border: 1px solid #ddd;">21/08/2004</td>
            <td style="padding: 8px; border: 1px solid #ddd;">093103002165</td>
            <td style="padding: 8px; border: 1px solid #ddd;">0374396243</td>
            <td style="padding: 8px; border: 1px solid #ddd;">dangb2203716@student.ctu.edu.vn</td>
            <td style="padding: 8px; border: 1px solid #ddd;">KiÃªn Giang</td>
            <td style="padding: 8px; border: 1px solid #ddd;">DI22D2A1</td>
            <td style="padding: 8px; border: 1px solid #ddd;">An toÃ n thÃ´ng tin</td>
            <td style="padding: 8px; border: 1px solid #ddd;">CNTT&TT</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Äáº¡i há»c Cáº§n ThÆ¡</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ChÃ­nh quy</td>
            <td style="padding: 8px; border: 1px solid #ddd; font-family: monospace; font-size: 10px;">0x742d35Cc...f44e</td>
            <td style="padding: 8px; border: 1px solid #ddd; font-weight: bold;">2020</td>
          </tr>
        </table>
      </div>

      <div class="file-input-wrapper">
        <input type="file" id="excelFileStudents" accept=".xlsx,.xls,.csv" onchange="handleExcelStudentUpload(event)" />
        <label for="excelFileStudents" class="file-input-label">ğŸ“ Chá»n file Excel/CSV</label>
        <span class="file-name" id="excelStudentsFileName">ChÆ°a chá»n file</span>
      </div>

      <div id="excelUploadStatus"></div>
      <div id="excelPreviewSection" style="display: none; margin-top: 20px;">
        <h3 style="color: #667eea;">Xem trÆ°á»›c dá»¯ liá»‡u</h3>
        <div id="excelPreviewStats"></div>
        <div style="max-height: 400px; overflow-y: auto; margin: 20px 0;">
          <table id="excelPreviewTable" style="width: 100%; border-collapse: collapse; font-size: 12px;">
            <thead id="excelPreviewHeader"></thead>
            <tbody id="excelPreviewBody"></tbody>
          </table>
        </div>
        <button class="success" onclick="submitExcelStudents()">âœ… ÄÄƒng kÃ½ táº¥t cáº£ sinh viÃªn</button>
        <button onclick="clearExcelUpload()">ğŸ”„ XÃ³a vÃ  chá»n file khÃ¡c</button>
      </div>
      <div id="excelSubmitResult"></div>
    </div>

    <!-- TAB 4: Quáº£n lÃ½ CÃ¡n bá»™ quáº£n lÃ½ Ä‘iá»ƒm -->
    <div id="tab-dean" class="tab-content">
      <h2>Quáº£n lÃ½ CÃ¡n bá»™ quáº£n lÃ½ Ä‘iá»ƒm</h2>
      
      <div class="info-box" style="font-size: 13px;">
        <strong>ğŸ“Œ LÆ°u Ã½:</strong><br>
        â€¢ CÃ¡n bá»™ quáº£n lÃ½ Ä‘iá»ƒm cÃ³ quyá»n submit Ä‘iá»ƒm cho sinh viÃªn vÃ  thu há»“i báº±ng tá»‘t nghiá»‡p<br>
        â€¢ Chá»‰ Admin má»›i cÃ³ quyá»n thÃªm/xÃ³a cÃ¡n bá»™ quáº£n lÃ½ Ä‘iá»ƒm<br>
        â€¢ Má»—i cÃ¡n bá»™ cáº§n cÃ³ Ä‘á»‹a chá»‰ vÃ­ MetaMask riÃªng
      </div>

      <h3 style="color: #667eea; margin-top: 20px;">ThÃªm CÃ¡n bá»™ quáº£n lÃ½ Ä‘iá»ƒm má»›i</h3>
      <div class="form-group">
        <label>Äá»‹a chá»‰ vÃ­ MetaMask *</label>
        <input type="text" id="deanAddress" placeholder="0x..." />
        <small style="color: #666; display: block; margin-top: 5px;">
          VÃ­ dá»¥: 0x1234567890123456789012345678901234567890
        </small>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Há» vÃ  tÃªn *</label>
          <input type="text" id="deanName" placeholder="TS. Nguyá»…n VÄƒn A" />
        </div>
        <div class="form-group">
          <label>TÃªn Khoa *</label>
          <input type="text" id="deanDepartment" placeholder="CÃ´ng nghá»‡ thÃ´ng tin vÃ  truyá»n thÃ´ng" />
        </div>
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" id="deanEmail" placeholder="dean@ctu.edu.vn" />
      </div>

      <div class="form-group">
        <label>Sá»‘ Ä‘iá»‡n thoáº¡i</label>
        <input type="tel" id="deanPhone" placeholder="0123456789" />
      </div>

      <div class="form-group">
        <label>Ghi chÃº</label>
        <textarea id="deanNotes" rows="2" placeholder="ThÃ´ng tin bá»• sung..."></textarea>
      </div>

      <button class="success" onclick="addDean()">âœ… ThÃªm CÃ¡n bá»™ quáº£n lÃ½ Ä‘iá»ƒm</button>
      <button onclick="clearDeanForm()">ğŸ”„ XÃ³a form</button>

      <div id="deanAddStatus"></div>

      <hr style="margin: 30px 0; border: none; border-top: 1px solid #ddd;">

      <h3 style="color: #667eea;">Danh sÃ¡ch CÃ¡n bá»™ quáº£n lÃ½ Ä‘iá»ƒm</h3>
      <button onclick="loadDeanList()">ğŸ”„ Táº£i láº¡i danh sÃ¡ch</button>
      
      <div id="deanList" class="student-list"></div>
    </div>

    <!-- TAB 6: Danh sÃ¡ch sinh viÃªn -->
    <div id="tab-list" class="tab-content">
      <h2>Danh sÃ¡ch sinh viÃªn Ä‘Ã£ Ä‘Äƒng kÃ½</h2>
      
      <div class="info-box">
        <strong>â„¹ï¸ LÆ°u Ã½:</strong> Chá»©c nÄƒng nÃ y hiá»ƒn thá»‹ cÃ¡c sinh viÃªn báº¡n Ä‘Ã£ Ä‘Äƒng kÃ½ trong phiÃªn lÃ m viá»‡c hiá»‡n táº¡i. 
        Äá»ƒ xem táº¥t cáº£ sinh viÃªn trong blockchain, cáº§n query events hoáº·c lÆ°u danh sÃ¡ch riÃªng.
      </div>

      <div style="margin-bottom: 15px;">
        <button onclick="loadRegisteredStudents()">ğŸ”„ Táº£i láº¡i danh sÃ¡ch</button>
      </div>
      
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
        <div>
          <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #333; font-size: 14px;">
            ğŸ“… KhÃ³a há»c:
          </label>
          <select id="yearFilter" onchange="filterStudents()" style="width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px;">
            <option value="">-- Táº¥t cáº£ khÃ³a há»c --</option>
          </select>
        </div>
        
        <div>
          <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #333; font-size: 14px;">
            ğŸ“ Lá»›p há»c:
          </label>
          <select id="classFilter" onchange="filterStudents()" style="width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px;">
            <option value="">-- Táº¥t cáº£ lá»›p --</option>
          </select>
        </div>
        
        <div>
          <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #333; font-size: 14px;">
            ğŸ” TÃ¬m kiáº¿m:
          </label>
          <input type="text" id="searchFilter" placeholder="MSSV hoáº·c tÃªn..." onkeyup="filterStudents()" style="width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px;" />
        </div>
      </div>
      
      <div id="studentList" class="student-list"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.4/dist/web3.min.js"></script>
  <script src="admin_students.js"></script>

</body>
</html>
